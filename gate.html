<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Mikey-log-2026 | Matrix Gate</title>
    <style>
        body { margin: 0; background: black; overflow: hidden; font-family: 'Courier New', monospace; }
        canvas { position: fixed; top: 0; left: 0; z-index: 1; }

        #main-ui {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* 扉と中身の画像 */
        .door-box {
            width: 260px; height: 320px; border: 2px solid #0f0;
            position: relative; cursor: pointer; background: black;
        }
        .door-l, .door-r {
            position: absolute; width: 50%; height: 100%; background: #111;
            border: 1px solid #0f0; transition: 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 15; /* 扉は画像より前 */
        }
        .door-r { right: 0; }
        .open .door-l { transform: translateX(-100%); }
        .open .door-r { transform: translateX(100%); }

        /* 中の絵 (image.PNG) */
        #art-box {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 5;
        }
        #art-box img { max-width: 90%; max-height: 90%; }

        /* ニュース風テロップ */
        #telop {
            position: fixed; top: 0; width: 100%; height: 40px;
            background: rgba(0, 40, 0, 0.8); border-bottom: 1px solid #0f0;
            overflow: hidden; white-space: nowrap; z-index: 20;
        }
        #telop span {
            display: inline-block; padding-left: 100%;
            color: #0f0; font-size: 1.2rem; line-height: 40px;
            animation: telop-scroll 15s linear infinite;
        }
        @keyframes telop-scroll { from { transform: translateX(0); } to { transform: translateX(-100%); } }

        /* メッセージ類 */
        .bttf-style {
            font-family: sans-serif; font-style: italic; font-weight: 900;
            color: #ff9e00; text-shadow: 3px 3px #ff0000;
            font-size: 2.5rem; margin-top: 30px; opacity: 0; transition: 2s;
        }
        .bless-msg { color: #fff; font-size: 1.2rem; margin-top: 10px; opacity: 0; transition: 3s; }
        .show { opacity: 1 !important; }
    </style>
</head>
<body>

<canvas id="matrix-bg"></canvas>

<div id="telop">
    <span>SYSTEM: MIKEY-LOG-2026 INITIALIZED. READY TO OPEN THE GATE...</span>
</div>

<div id="main-ui">
    <div id="gate-wrap" class="door-box" onclick="activateGate()">
        <div id="art-box">
            <img src="image.PNG" alt="Gate Image">
        </div>
        <div class="door-l"></div>
        <div class="door-r"></div>
    </div>
    
    <div id="bttf-text" class="bttf-style">BACK TO THE FUTURE!</div>
    <div id="bless-text" class="bless-msg">君に幸あれ</div>
</div>

<script>
// --- マトリックス描画 ---
const canvas = document.getElementById('matrix-bg');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
const drops = Array(Math.floor(canvas.width/16)).fill(1);
function draw() {
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = "#0f0";
    ctx.font = "16px monospace";
    drops.forEach((y, i) => {
        const text = String.fromCharCode(0x30A0 + Math.random() * 96);
        ctx.fillText(text, i*16, y*16);
        if(y*16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
    });
}
setInterval(draw, 33);

// --- 音声とアクション ---
const AudioContext = window.AudioContext || window.webkitAudioContext;
let audioCtx;

function playTone(f, s, d, type='sine', v=0.2) {
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = type; o.frequency.setValueAtTime(f, s);
    g.gain.setValueAtTime(v, s);
    g.gain.exponentialRampToValueAtTime(0.01, s + d);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(s); o.stop(s + d);
}

function activateGate() {
    if (!audioCtx) audioCtx = new AudioContext();
    const now = audioCtx.currentTime;
    
    document.getElementById('gate-wrap').classList.add('open');

    // 1. チャイム
    playTone(659, now, 0.5, 'sine'); 
    playTone(523, now + 0.4, 0.7, 'sine');

    // 2. スターウォーズ・ファンファーレ
    const sw = now + 1.2;
    playTone(233, sw, 1.0, 'sawtooth', 0.3);
    playTone(349, sw, 1.0, 'sawtooth', 0.3);
    playTone(466, sw, 1.0, 'sawtooth', 0.3);

    // 3. テキスト表示
    setTimeout(() => {
        document.getElementById('bttf-text').classList.add('show');
        document.getElementById('bless-text').classList.add('show');
    }, 1200);
}
</script>
</body>
</html>
