<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Mikey-log-2026 | Star Wars Matrix Gate</title>
    <style>
        body { margin: 0; background: black; overflow: hidden; font-family: 'Courier New', monospace; }
        canvas { position: fixed; top: 0; left: 0; z-index: 1; }

        #ui-layer {
            position: relative; z-index: 10;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; height: 100vh;
        }

        /* 扉と画像 */
        .door-box {
            width: 400px; height: 500px; border: 3px solid #0f0;
            position: relative; cursor: pointer; background: black;
            box-shadow: 0 0 40px rgba(0,255,0,0.4);
            z-index: 20;
        }
        .door-l, .door-r {
            position: absolute; width: 50%; height: 100%; background: #111;
            border: 1px solid #0f0; transition: 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 25; display: flex; align-items: center; justify-content: center;
        }
        .door-r { right: 0; }
        .open .door-l { transform: translateX(-100%); }
        .open .door-r { transform: translateX(100%); }

        #art-box {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 5; background: #000;
        }
        #art-box img { width: 95%; height: 95%; object-fit: contain; }

        /* --- スター・ウォーズ風クロール設定 --- */
        #crawl-container {
            display: none; /* 最初は隠す */
            position: absolute;
            bottom: 0; width: 60%;
            height: 100%;
            perspective: 300px; /* 3D遠近感 */
            color: #ffde00;
            font-family: "Arial Black", sans-serif;
            text-align: justify;
            z-index: 30;
            pointer-events: none; /* クリックを邪魔しない */
        }
        #crawl-content {
            position: absolute;
            top: 100%;
            transform: rotateX(25deg);
            animation: sw-crawl 30s linear forwards;
        }
        @keyframes sw-crawl {
            0% { top: 100%; opacity: 1; }
            100% { top: -150%; opacity: 0; }
        }

        /* BTTF & メッセージ */
        .bttf-style {
            font-family: 'Arial Black', sans-serif; font-style: italic; font-weight: 900;
            color: #ff9e00; text-shadow: 4px 4px #ff0000;
            font-size: 3rem; margin-top: 20px; opacity: 0; transition: 2s;
        }
        .bless-msg { color: #fff; font-size: 1.8rem; margin-top: 5px; opacity: 0; transition: 3s; font-weight: bold; }
        .show { opacity: 1 !important; }
    </style>
</head>
<body>

<canvas id="matrix-canvas"></canvas>

<div id="ui-layer">
    <div id="crawl-container">
        <div id="crawl-content">
            <h2 style="text-align:center;">Episode 2026</h2>
            <h1 style="text-align:center;">THE GATE OPENED</h1>
            <p>It is a period of digital revolution. Mikey-log-2026 has successfully integrated the legendary soundtrack into the Matrix gateway...</p>
            <p>With the power of Web Audio API, the galaxy resonates with a new hope. May the code be with you forever...</p>
        </div>
    </div>

    <div id="gate" class="door-box" onclick="activateGate()">
        <div id="art-box">
            <img src="image.PNG" alt="Art">
        </div>
        <div class="door-l"><span style="color:#0f0; font-size:40px;">[</span></div>
        <div class="door-r"><span style="color:#0f0; font-size:40px;">]</span></div>
    </div>
    
    <div id="bttf" class="bttf-style">BACK TO THE FUTURE!</div>
    <div id="bless" class="bless-msg">君に幸あれ</div>
</div>

<script>
// --- マトリックス背景 ---
const canvas = document.getElementById('matrix-canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
const drops = Array(Math.floor(canvas.width/16)).fill(1);
function drawMatrix() {
    ctx.fillStyle = "rgba(0,0,0,0.1)"; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = "#0f0"; ctx.font = "16px monospace";
    drops.forEach((y, i) => {
        const text = String.fromCharCode(0x30A0 + Math.random() * 96);
        ctx.fillText(text, i*16, y*16);
        if(y*16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
    });
}
setInterval(drawMatrix, 33);

// --- 音声とアクション ---
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playTone(f, s, d, type='sine', v=0.2) {
    const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
    o.type = type; o.frequency.setValueAtTime(f, s);
    g.gain.setValueAtTime(v, s); g.gain.exponentialRampToValueAtTime(0.01, s + d);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(s); o.stop(s + d);
}

function activateGate() {
    const now = audioCtx.currentTime;
    document.getElementById('gate').classList.add('open');
    document.getElementById('crawl-container').style.display = 'block';

    // 1. チャイム & SWファンファーレ
    playTone(659, now, 0.5); playTone(523, now + 0.4, 0.7);
    const sw = now + 1.2;
    playTone(233, sw, 1.2, 'sawtooth', 0.3);
    playTone(349, sw, 1.2, 'sawtooth', 0.3);
    playTone(466, sw, 1.2, 'sawtooth', 0.3);

    // 2. セリフ
    const uttr = new SpeechSynthesisUtterance("Welcome to mikey-log-2026. 君に幸あれ");
    uttr.lang = 'ja-JP';
    speechSynthesis.speak(uttr);

    // 3. メッセージ表示
    setTimeout(() => {
        document.getElementById('bttf').classList.add('show');
        document.getElementById('bless').classList.add('show');
    }, 1200);
}
</script>
</body>
</html>
